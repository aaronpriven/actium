#!/usr/bin/perl5require ('/home/priven/public_html/cgi-lib.pl');&ReadParse;# get data from form$linenum = %in{"linenum"};$dirname = %in{"dirname"};$direction = %in{"direction"};$pickedpoint = %in{"pickedpoint"};$pickedpoint--;# you pick a 1-based number, but the program needs a 0-based numberif (%in{"checkline"}) {    $linesflag = 1;    @lines = split("\0", %in{"checkline"};    if ($#lines > 0 ) {            $linesstring = "Lines ";                foreach (0 .. $#lines - 1)            $linesstring .= "$lines[$_], ";        }        $linesstring .= "and $lines[$#lines]";        } else {            $linesstring = "Line $lines[0]";} else {   $linesstring = "Line $linenum";}open TEMPFILE, "</tmp/vbs/$direction";$numpoints = <TEMPFILE>;foreach (0 .. $numpoints) {   ($code, $timepoint) = split (<TEMPFILE>, "\0", 2);   push @codes, $code;   push @timepoints, $timepoint;}@sched = <TEMPFILE>; # love that "read a whole file with one line" thingclose TEMPFILE;print "Content-type: text/html\n\n";print "<title>Vigilante Bus Schedules: Line $linenum</title>\n";print "<h2>$linestring, $dirname for $timepoint[$pickedpoint]</h2>\n";